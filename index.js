(()=>{"use strict";const e=function(){function e(e,t){this.container=document.createElement("div"),this.container.id=e}return e.prototype.createHeaderTitle=function(e){var t=document.createElement("h1");return t.innerHTML=e,t},e.prototype.createContentPage=function(){return"1"},e.prototype.render=function(){var e=this.createHeaderTitle("Products Page");this.container.append(e);var t=this.createContentPage();return this.container.append(t),this.container},e}(),t=function(){function e(e){this.container=document.createElement("div"),this.container.id=e}return e.prototype.createHeaderTitle=function(e){var t=document.createElement("h1");return t.innerHTML=e,t},e.prototype.createContentPage=function(){return"1"},e.prototype.render=function(){var e=this.createHeaderTitle("Product Page");this.container.append(e);var t=this.createContentPage();return this.container.append(t),this.container},e}(),n=function(){function e(e){this.container=document.createElement("div"),this.container.id=e}return e.prototype.createHeaderTitle=function(e){var t=document.createElement("h1");return t.innerHTML=e,t},e.prototype.createContentPage=function(){return"1"},e.prototype.render=function(){var e=this.createHeaderTitle("Cart Page");this.container.append(e);var t=this.createContentPage();return this.container.append(t),this.container},e}(),r=function(){function e(e){this.container=document.createElement("div"),this.container.id=e}return e.prototype.createHeaderTitle=function(e){var t=document.createElement("h1");return t.innerHTML=e,t},e.prototype.createContentPage=function(){return"1"},e.prototype.render=function(){var e=this.createHeaderTitle("Error Page");this.container.append(e);var t=this.createContentPage();return this.container.append(t),this.container},e}();var a=document.createElement("header");a.innerHTML='<div class="header"> <a href="#cart">cart</a> <a href="#products">products</a> <a href="#products?name=1">products?name=1</a> <a href="#product/23">product/23</a> </div>';const o=a;(new(function(){function a(){this.container=document.body,this.initialPage=new t("products-page")}return a.renderNewPage=function(o){var i=document.getElementById(a.defaultPageId);i.innerHTML="";var c=null;if(c=""===o?new e("products-page"):"cart"===o?new n("cart-page"):"products"===o?new e("products-page"):o.includes("products?")?new e("products-page",o):o.includes("product/")?new t("product-page"):new r("error-page")){var d=c.render();i.append(d)}},a.prototype.enableRouteChange=function(){addEventListener("hashchange",(function(){var e=window.location.hash.slice(1);a.renderNewPage(e)})),window.onpopstate=function(){console.log(window.location.hash.slice(1))}},a.prototype.run=function(){var e=this;addEventListener("DOMContentLoaded",(function(){var t=window.location.hash.slice(1);e.container.append(o);var n=e.initialPage.render();n.id=a.defaultPageId,e.container.append(n),t&&a.renderNewPage(t),e.enableRouteChange()}))},a.defaultPageId="current-page",a}())).run()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQTZCQSxRQTdCQSxXQUVJLFdBQVlBLEVBQVlDLEdBQ3BCQyxLQUFLQyxVQUFZQyxTQUFTQyxjQUFjLE9BQ3hDSCxLQUFLQyxVQUFVSCxHQUFLQSxDQUN4QixDQXNCSixPQXBCWSxZQUFBTSxrQkFBUixTQUEwQkMsR0FDdEIsSUFBSUMsRUFBY0osU0FBU0MsY0FBYyxNQUV6QyxPQURBRyxFQUFZQyxVQUFZRixFQUNqQkMsQ0FDWCxFQUVRLFlBQUFFLGtCQUFSLFdBQ0ksTUFBTyxHQUlYLEVBRUEsWUFBQUMsT0FBQSxXQUNJLElBQU1DLEVBQVFWLEtBQUtJLGtCQUFrQixpQkFDckNKLEtBQUtDLFVBQVVVLE9BQU9ELEdBQ3RCLElBQU1FLEVBQVVaLEtBQUtRLG9CQUVyQixPQURBUixLQUFLQyxVQUFVVSxPQUFPQyxHQUNmWixLQUFLQyxTQUNoQixFQUNKLEVBM0JBLEdDOEJBLEVBOUJBLFdBR0ksV0FBWUgsR0FDUkUsS0FBS0MsVUFBWUMsU0FBU0MsY0FBYyxPQUN4Q0gsS0FBS0MsVUFBVUgsR0FBS0EsQ0FDeEIsQ0FzQkosT0FwQlksWUFBQU0sa0JBQVIsU0FBMEJDLEdBQ3RCLElBQUlDLEVBQWNKLFNBQVNDLGNBQWMsTUFFekMsT0FEQUcsRUFBWUMsVUFBWUYsRUFDakJDLENBQ1gsRUFFUSxZQUFBRSxrQkFBUixXQUNJLE1BQU8sR0FJWCxFQUVBLFlBQUFDLE9BQUEsV0FDSSxJQUFNQyxFQUFRVixLQUFLSSxrQkFBa0IsZ0JBQ3JDSixLQUFLQyxVQUFVVSxPQUFPRCxHQUN0QixJQUFNRSxFQUFVWixLQUFLUSxvQkFFckIsT0FEQVIsS0FBS0MsVUFBVVUsT0FBT0MsR0FDZlosS0FBS0MsU0FDaEIsRUFDSixFQTVCQSxHQzhCQSxFQTlCQSxXQUdJLFdBQVlILEdBQ1JFLEtBQUtDLFVBQVlDLFNBQVNDLGNBQWMsT0FDeENILEtBQUtDLFVBQVVILEdBQUtBLENBQ3hCLENBc0JKLE9BcEJZLFlBQUFNLGtCQUFSLFNBQTBCQyxHQUN0QixJQUFJQyxFQUFjSixTQUFTQyxjQUFjLE1BRXpDLE9BREFHLEVBQVlDLFVBQVlGLEVBQ2pCQyxDQUNYLEVBRVEsWUFBQUUsa0JBQVIsV0FDSSxNQUFPLEdBSVgsRUFFQSxZQUFBQyxPQUFBLFdBQ0ksSUFBTUMsRUFBUVYsS0FBS0ksa0JBQWtCLGFBQ3JDSixLQUFLQyxVQUFVVSxPQUFPRCxHQUN0QixJQUFNRSxFQUFVWixLQUFLUSxvQkFFckIsT0FEQVIsS0FBS0MsVUFBVVUsT0FBT0MsR0FDZlosS0FBS0MsU0FDaEIsRUFDSixFQTVCQSxHQzhCQSxFQTlCQSxXQUdJLFdBQVlILEdBQ1JFLEtBQUtDLFVBQVlDLFNBQVNDLGNBQWMsT0FDeENILEtBQUtDLFVBQVVILEdBQUtBLENBQ3hCLENBc0JKLE9BcEJZLFlBQUFNLGtCQUFSLFNBQTBCQyxHQUN0QixJQUFJQyxFQUFjSixTQUFTQyxjQUFjLE1BRXpDLE9BREFHLEVBQVlDLFVBQVlGLEVBQ2pCQyxDQUNYLEVBRVEsWUFBQUUsa0JBQVIsV0FDSSxNQUFPLEdBSVgsRUFFQSxZQUFBQyxPQUFBLFdBQ0ksSUFBTUMsRUFBUVYsS0FBS0ksa0JBQWtCLGNBQ3JDSixLQUFLQyxVQUFVVSxPQUFPRCxHQUN0QixJQUFNRSxFQUFVWixLQUFLUSxvQkFFckIsT0FEQVIsS0FBS0MsVUFBVVUsT0FBT0MsR0FDZlosS0FBS0MsU0FDaEIsRUFDSixFQTVCQSxHQ0VBLElBQU0sRUFBU0MsU0FBU0MsY0FBYyxVQUN0QyxFQUFPSSxVQ0ZJLDRLRElYLFdFSFksSUNJWixXQUtJLGFBQ0lQLEtBQUtDLFVBQVlDLFNBQVNXLEtBQzFCYixLQUFLYyxZQUFjLElBQUksRUFBWSxnQkFDdkMsQ0FtREosT0FqRFcsRUFBQUMsY0FBUCxTQUFxQkMsR0FDakIsSUFBTUMsRUFBOEJmLFNBQVNnQixlQUFlQyxFQUFJQyxlQUNoRUgsRUFBWVYsVUFBWSxHQUN4QixJQUFJYyxFQUFpRSxLQWdCckUsR0FiSUEsRUFEVyxLQUFYTCxFQUNPLElBQUksRUFBYSxpQkFDTixTQUFYQSxFQUNBLElBQUksRUFBUyxhQUNGLGFBQVhBLEVBQ0EsSUFBSSxFQUFhLGlCQUNqQkEsRUFBT00sU0FBUyxhQUNoQixJQUFJLEVBQWEsZ0JBQWlCTixHQUNsQ0EsRUFBT00sU0FBUyxZQUNoQixJQUFJLEVBQVksZ0JBRWhCLElBQUksRUFBVSxjQUdmLENBQ04sSUFBTUMsRUFBV0YsRUFBS1osU0FDdEJRLEVBQVlOLE9BQU9ZLEUsQ0FFM0IsRUFFUSxZQUFBQyxrQkFBUixXQUNJQyxpQkFBaUIsY0FBYyxXQUMzQixJQUFJQyxFQUFPQyxPQUFPQyxTQUFTRixLQUFLRyxNQUFNLEdBQ3RDVixFQUFJSixjQUFjVyxFQUN0QixJQUVBQyxPQUFPRyxXQUFhLFdBQ2hCQyxRQUFRQyxJQUFJTCxPQUFPQyxTQUFTRixLQUFLRyxNQUFNLEdBQzNDLENBQ0osRUFFQSxZQUFBSSxJQUFBLHNCQUNJUixpQkFBaUIsb0JBQW9CLFdBQ2pDLElBQUlDLEVBQU9DLE9BQU9DLFNBQVNGLEtBQUtHLE1BQU0sR0FDdEMsRUFBSzVCLFVBQVVVLE9BQU8sR0FDdEIsSUFBTVksRUFBVyxFQUFLVCxZQUFZTCxTQUNsQ2MsRUFBU3pCLEdBQUtxQixFQUFJQyxjQUNsQixFQUFLbkIsVUFBVVUsT0FBT1ksR0FDbEJHLEdBQ0FQLEVBQUlKLGNBQWNXLEdBRXRCLEVBQUtGLG1CQUNULEdBQ0osRUF2RGUsRUFBQUosY0FBZ0IsZUF3RG5DLEMsQ0EzREEsS0RISWEsSyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy9wYWdlcy9wcm9kdWN0cy9pbmRleC50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvcGFnZXMvcHJvZHVjdC9pbmRleC50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvcGFnZXMvY2FydC9pbmRleC50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvcGFnZXMvRXJyb3I0MDQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb25saW5lLXN0b3JlLy4vc3JjL2NvbXBvbmVudHMvdmlldy9oZWFkZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb25saW5lLXN0b3JlLy4vc3JjL2NvbXBvbmVudHMvdmlldy9oZWFkZXIvaGVhZGVyLmh0bWwiLCJ3ZWJwYWNrOi8vb25saW5lLXN0b3JlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy9jb21wb25lbnRzL2FwcC9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUHJvZHVjdHNQYWdlIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgcGFyYW1zPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaWQgPSBpZFxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlSGVhZGVyVGl0bGUodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBoZWFkZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgaGVhZGVyVGl0bGUuaW5uZXJIVE1MID0gdGV4dDtcbiAgICAgICAgcmV0dXJuIGhlYWRlclRpdGxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQ29udGVudFBhZ2UoKSB7XG4gICAgICAgIHJldHVybiBcIjFcIlxuICAgICAgICAvLyBsZXQgaGVhZGVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgICAgIC8vIGhlYWRlclRpdGxlLmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgIC8vIHJldHVybiBoZWFkZXJUaXRsZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5jcmVhdGVIZWFkZXJUaXRsZShcIlByb2R1Y3RzIFBhZ2VcIilcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRpdGxlKVxuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5jcmVhdGVDb250ZW50UGFnZSgpXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChjb250ZW50KVxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3RzUGFnZTsiLCJjbGFzcyBQcm9kdWN0UGFnZSB7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlkID0gaWRcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUhlYWRlclRpdGxlKHRleHQ6IHN0cmluZykge1xuICAgICAgICBsZXQgaGVhZGVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgICAgIGhlYWRlclRpdGxlLmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgIHJldHVybiBoZWFkZXJUaXRsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUNvbnRlbnRQYWdlKCkge1xuICAgICAgICByZXR1cm4gXCIxXCJcbiAgICAgICAgLy8gbGV0IGhlYWRlclRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICAgICAgICAvLyBoZWFkZXJUaXRsZS5pbm5lckhUTUwgPSB0ZXh0O1xuICAgICAgICAvLyByZXR1cm4gaGVhZGVyVGl0bGU7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuY3JlYXRlSGVhZGVyVGl0bGUoXCJQcm9kdWN0IFBhZ2VcIilcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRpdGxlKVxuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5jcmVhdGVDb250ZW50UGFnZSgpXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChjb250ZW50KVxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3RQYWdlOyIsImNsYXNzIENhcnRQYWdlIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaWQgPSBpZFxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlSGVhZGVyVGl0bGUodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBoZWFkZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgaGVhZGVyVGl0bGUuaW5uZXJIVE1MID0gdGV4dDtcbiAgICAgICAgcmV0dXJuIGhlYWRlclRpdGxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQ29udGVudFBhZ2UoKSB7XG4gICAgICAgIHJldHVybiBcIjFcIlxuICAgICAgICAvLyBsZXQgaGVhZGVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgICAgIC8vIGhlYWRlclRpdGxlLmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgIC8vIHJldHVybiBoZWFkZXJUaXRsZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5jcmVhdGVIZWFkZXJUaXRsZShcIkNhcnQgUGFnZVwiKVxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGl0bGUpXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmNyZWF0ZUNvbnRlbnRQYWdlKClcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGNvbnRlbnQpXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FydFBhZ2U7IiwiY2xhc3MgRXJyb3JQYWdlIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaWQgPSBpZFxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlSGVhZGVyVGl0bGUodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBoZWFkZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgaGVhZGVyVGl0bGUuaW5uZXJIVE1MID0gdGV4dDtcbiAgICAgICAgcmV0dXJuIGhlYWRlclRpdGxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQ29udGVudFBhZ2UoKSB7XG4gICAgICAgIHJldHVybiBcIjFcIlxuICAgICAgICAvLyBsZXQgaGVhZGVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgICAgIC8vIGhlYWRlclRpdGxlLmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgIC8vIHJldHVybiBoZWFkZXJUaXRsZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5jcmVhdGVIZWFkZXJUaXRsZShcIkVycm9yIFBhZ2VcIilcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRpdGxlKVxuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5jcmVhdGVDb250ZW50UGFnZSgpXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChjb250ZW50KVxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVycm9yUGFnZTsiLCJpbXBvcnQgSGVhZGVyVGVtcGxhdGUgZnJvbSBcIi4vaGVhZGVyLmh0bWxcIlxuXG5jb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIpXG5oZWFkZXIuaW5uZXJIVE1MID0gSGVhZGVyVGVtcGxhdGVcblxuZXhwb3J0IGRlZmF1bHQgaGVhZGVyIiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBjbGFzcz1cXFwiaGVhZGVyXFxcIj4gPGEgaHJlZj1cXFwiI2NhcnRcXFwiPmNhcnQ8L2E+IDxhIGhyZWY9XFxcIiNwcm9kdWN0c1xcXCI+cHJvZHVjdHM8L2E+IDxhIGhyZWY9XFxcIiNwcm9kdWN0cz9uYW1lPTFcXFwiPnByb2R1Y3RzP25hbWU9MTwvYT4gPGEgaHJlZj1cXFwiI3Byb2R1Y3QvMjNcXFwiPnByb2R1Y3QvMjM8L2E+IDwvZGl2PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgQXBwIGZyb20gXCIuL2NvbXBvbmVudHMvYXBwL2FwcFwiO1xuXG5jb25zdCBhcHAgPSBuZXcgQXBwKCk7XG5hcHAucnVuKCk7IiwiaW1wb3J0IFByb2R1Y3RzUGFnZSBmcm9tIFwiLi4vLi4vcGFnZXMvcHJvZHVjdHNcIjtcbmltcG9ydCBQcm9kdWN0UGFnZSBmcm9tIFwiLi4vLi4vcGFnZXMvcHJvZHVjdFwiO1xuaW1wb3J0IENhcnRQYWdlIGZyb20gXCIuLi8uLi9wYWdlcy9jYXJ0XCI7XG5pbXBvcnQgRXJyb3JQYWdlIGZyb20gXCIuLi8uLi9wYWdlcy9FcnJvcjQwNFwiO1xuaW1wb3J0IGhlYWRlciBmcm9tIFwiLi4vdmlldy9oZWFkZXJcIjtcblxuY2xhc3MgQXBwIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbml0aWFsUGFnZTogUHJvZHVjdFBhZ2U7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZGVmYXVsdFBhZ2VJZCA9IFwiY3VycmVudC1wYWdlXCJcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIHRoaXMuaW5pdGlhbFBhZ2UgPSBuZXcgUHJvZHVjdFBhZ2UoXCJwcm9kdWN0cy1wYWdlXCIpXG4gICAgfVxuXG4gICAgc3RhdGljIHJlbmRlck5ld1BhZ2UoaWRQYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQXBwLmRlZmF1bHRQYWdlSWQpXG4gICAgICAgIGN1cnJlbnRQYWdlLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgbGV0IHBhZ2U6IENhcnRQYWdlIHwgUHJvZHVjdFBhZ2UgfCBQcm9kdWN0c1BhZ2UgfCBFcnJvclBhZ2UgfCBudWxsID0gbnVsbDtcblxuICAgICAgICBpZiAoaWRQYWdlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBwYWdlID0gbmV3IFByb2R1Y3RzUGFnZShcInByb2R1Y3RzLXBhZ2VcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoaWRQYWdlID09PSBcImNhcnRcIikge1xuICAgICAgICAgICAgcGFnZSA9IG5ldyBDYXJ0UGFnZShcImNhcnQtcGFnZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChpZFBhZ2UgPT09IFwicHJvZHVjdHNcIikge1xuICAgICAgICAgICAgcGFnZSA9IG5ldyBQcm9kdWN0c1BhZ2UoXCJwcm9kdWN0cy1wYWdlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlkUGFnZS5pbmNsdWRlcyhcInByb2R1Y3RzP1wiKSkge1xuICAgICAgICAgICAgcGFnZSA9IG5ldyBQcm9kdWN0c1BhZ2UoXCJwcm9kdWN0cy1wYWdlXCIsIGlkUGFnZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaWRQYWdlLmluY2x1ZGVzKFwicHJvZHVjdC9cIikpIHtcbiAgICAgICAgICAgIHBhZ2UgPSBuZXcgUHJvZHVjdFBhZ2UoXCJwcm9kdWN0LXBhZ2VcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYWdlID0gbmV3IEVycm9yUGFnZShcImVycm9yLXBhZ2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFnZSkge1xuICAgICAgICAgICAgY29uc3QgcGFnZUhUTUwgPSBwYWdlLnJlbmRlcigpXG4gICAgICAgICAgICBjdXJyZW50UGFnZS5hcHBlbmQocGFnZUhUTUwpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGVuYWJsZVJvdXRlQ2hhbmdlKCkge1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpXG4gICAgICAgICAgICBBcHAucmVuZGVyTmV3UGFnZShoYXNoKVxuICAgICAgICB9KVxuXG4gICAgICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSkpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBydW4oKSB7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSlcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChoZWFkZXIpXG4gICAgICAgICAgICBjb25zdCBwYWdlSFRNTCA9IHRoaXMuaW5pdGlhbFBhZ2UucmVuZGVyKClcbiAgICAgICAgICAgIHBhZ2VIVE1MLmlkID0gQXBwLmRlZmF1bHRQYWdlSWRcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChwYWdlSFRNTClcbiAgICAgICAgICAgIGlmIChoYXNoKSB7XG4gICAgICAgICAgICAgICAgQXBwLnJlbmRlck5ld1BhZ2UoaGFzaClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5hYmxlUm91dGVDaGFuZ2UoKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwIl0sIm5hbWVzIjpbImlkIiwicGFyYW1zIiwidGhpcyIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUhlYWRlclRpdGxlIiwidGV4dCIsImhlYWRlclRpdGxlIiwiaW5uZXJIVE1MIiwiY3JlYXRlQ29udGVudFBhZ2UiLCJyZW5kZXIiLCJ0aXRsZSIsImFwcGVuZCIsImNvbnRlbnQiLCJib2R5IiwiaW5pdGlhbFBhZ2UiLCJyZW5kZXJOZXdQYWdlIiwiaWRQYWdlIiwiY3VycmVudFBhZ2UiLCJnZXRFbGVtZW50QnlJZCIsIkFwcCIsImRlZmF1bHRQYWdlSWQiLCJwYWdlIiwiaW5jbHVkZXMiLCJwYWdlSFRNTCIsImVuYWJsZVJvdXRlQ2hhbmdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhc2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNsaWNlIiwib25wb3BzdGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJydW4iXSwic291cmNlUm9vdCI6IiJ9